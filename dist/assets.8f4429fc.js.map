{"version":3,"sources":["assets/MediaPlayer.js","assets/plugins/AutoPlay.js","assets/plugins/AutoPause.ts","assets/index.js"],"names":["MediaPlayer","constructor","config","media","el","plugins","_initPlugins","player","play","pause","muted","value","forEach","plugin","run","mute","unmute","AutoPlay","prototype","video","document","querySelector","buttonPlay","getElementById","buttonMute","AutoPause","onclick","paused","navigator","serviceWorker","register","catch","error","console","log","message"],"mappings":";;AGAA;;AACA;;AACA,ADAA,IAAA,SAAA;AFFA,AEEA,ADFA,MDAMA,GCAGiB,QDAT,ACAA,CDAkB,ECAC,CAAE;ADCjBhB,AECJ,EFDIA,UECJ,CFDe,CAACC,MAAD,EAAS;AAChB,AEIJ,ADJJe,QAAQ,CDAKd,ACAJe,ECIL,GFJI,GAAahB,CCArB,CAAmBY,CCIf,EDJJ,CDA2B,AEIvB,CFJwBV,CCAH,CDAjB,SCA2BG,MAAV,EAAiB;ADClC,AGCR,ADGQ,ADJJ,MECEY,AFDC,CAACZ,EDAKF,AEIA,ECHF,EFDG,CECAe,AFDCV,EDAP,EEIA,CFJeR,ACAnB,ECIqB,ADJJ,CECC,CAACmB,EHDM,AEIrB,CFJsBhB,OAAP,GGCT,CHD2B,AGCJ,EHD7B,KGCM,CAAd;AACA,ADGQ,ADJAE,IAAAA,EECFe,GDGO,CDJC,CAACZ,KECC,AFDR,GECWU,AFDI,IAAf,IECmB,ADGnB,CCHoBG,EDGM,KAAK,OCHpB,CAAwB,MAAxB,CAAnB,GDGkC,CAAwB,IAAxB,CAA6B,IAA7B,CAA1B;AFHA,AGCR,ADGQ,ADJH,MECCC,GHDOlB,AEIA,OCHG,GAAGc,EHDX,MGCmB,CAACG,GDGpB,GAA8B,KAAK,GCHxB,CAAwB,MAAxB,CAAnB,WDGsC,CAA4B,IAA5B,CAAiC,IAAjC,CAA9B;AFHH,AGEL,ADEK,MCFChB,MAAM,GAAG,IAAIP,oBAAJ,CAAgB;AAC3BI,AFHAG,EEGAH,AFHAG,EEGE,EAAEY,EFHE,CAACX,EEEoB,EFF3B;ADCAF,AGGAD,ADEA,ADLH,CALD,CDKIC,AGGAD,ADEA,OCFO,EAAE,ADET,CCFU,ADEV,EFLY,EGGEY,CHHC,IEKf,CAAA,GAAA,GAAA,KCFU,EAAD,EAAiB,CDEtB,GCF0BQ,GDE9B,EAAU,aCFgB,EAAjB;AHFL,AGAuB,ADKvB,CCLO,CAAf,ODKa,CFLClB,KEKN,CFLY,EEKE,CFLC,KEKf;AFJIC,AEMJ,MFNIA,EEME,EFNE,EAAE,GCAHS,CCMO,EFNE,CEMC,IFNIT,AEMA,IFNL,EADD,cEOE,CAAyB,KAAK,kBAA9B,EAAkD;AFL/DC,AGEZa,ADIY,MFNAb,AEMA,ICJF,CHFO,AGENiB,EHFQ,EEME,EAAE,CCJvB,CHFyB,EGEJ,CDIO,EFNEjB,GGEHU,EHFF,EAFF,AEOoD,CCH3C,ADIM,CCJLQ,MAAN,GAAepB,MAAM,CAACC,IAAP,EAAf,GAA+BD,MAAM,CAACE,KAAP,EAA1D;AHDYN,MAAAA,KAAK,EAAE,KAAKA,KAHD;AGKvBqB,ADE2E,KAAlD,CAAjB,ICFE,CAACE,OAAX,GAAqB,MAAMP,KAAK,CAACT,KAAN,GAAcH,MAAM,CAACS,MAAP,EAAd,GAAgCT,MAAM,CAACQ,IAAP,EAA3D;AHDY,AEOJ,IAAA,MFPQL,EEOA,CAAC,EFPL,GAAY,EEOhB,CAAiB,KAAK,MAAL,CAAY,KAA7B;AFNQ,AGEhB,ADMQ,ICNL,ADMK,QAAQ,CAAC,EFRM,KAAKP,GGENyB,EHFC,CAAWlB,GEQ1B,CAA0B,CFRlB,CGEhB,EAAgC,cDMxB,EAA8C,KAAK,sBAAnD;AFPK,AGETkB,ADMC,ECNDA,CDJA,IFJmB,IGQV,CAACC,aAAV,CAAwBC,QAAxB,CAAiC,sCAAjC,EAA2CC,KAA3C,CAAiDC,KAAK,IAAI;AACtDC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB;AHFI,AGGP,ADMO,EAAA,CCRR,OHDYzB,CESJ,CAAA,GFTA,CAAUC,KAAV,AESA,CAAA,CFTiB,iBESjB,GAAR,UAA2B,OAA3B,EAA+D;AFRnD,AGGf,ADMO,QAAM,KFTOR,AESF,GAAG,EFTN,CAAWO,IESE,CFTb,AESc,CAAD,CAArB,CFT2BC,AEQgC,CACjC,IFTlB;AACH;AEUL,QAAG,KAAK,CAAC,iBAAN,GAA0B,KAAK,SAAlC,EAA4C;AFnB7B,AEoBX,KFpBJ,MEoBS,MAAL,CAAY,KAAZ;AFRJ,AESC,KAFD,IFPKN,EESA,KFTL,CAAaO,OAAb,CAAqBC,MAAM,IAAI;AAC3BA,AESA,MFTAA,KESK,CFTC,CAACC,GAAP,CAAWP,AESX,CAAY,IAAZ,CFTA;AACH,AESA,KFXD;AAGH,AESA,GARO;;AFARC,AEUQ,EFVRA,AEUQ,IFVJ,GAAG,EEUC,CAAA,SAAA,CAAA,sBAAA,GAAR,YAAA;AFTI,AEUA,QAAM,CFVDL,KAAL,CAAWK,EEUI,EFVf,CEUkB,QAAQ,CAAC,eAAT,KAA6B,SAA/C;AFTH;AEWG,QAAG,SAAH,EAAa;AFVjBC,AEWQ,EFXRA,KAAK,GAAG,CEWK,MAAL,CAAY,IAAZ;AFVJ,AEWC,KAFD,IFTKN,EEWA,GFXL,CAAWM,KAAX;AACH,AEWO,WAAK,MAAL,CAAY,KAAZ;AACH;AFXLM,AEYC,EFZDA,CEIQ,GFJJ,GAAG;AACH,SAAKZ,KAAL,CAAWO,KAAX,GAAmB,IAAnB;AACH,AEWL,SAAA,SAAA;AAzCA,CAAA,EAAA;AF+BIM,EAAAA,MAAM,GAAG;AACL,AEWR,OAAA,CAAA,CFXab,KAAL,CAAWO,AEWnB,GAAe,EFXP,GAAmB,IEW3B,CFXQ;AACH;;AAnCa;;eAsCHV","file":"assets.8f4429fc.js","sourceRoot":"..","sourcesContent":["class MediaPlayer {\r\n    constructor(config) {\r\n        this.media = config.el;\r\n        this.plugins = config.plugins || [];\r\n\r\n        this._initPlugins();\r\n    }\r\n    _initPlugins() {\r\n        const player = {\r\n            play: () => this.play(),\r\n            pause: () => this.pause(),\r\n            media: this.media,\r\n            get muted() {\r\n                return this.media.muted;\r\n            },\r\n            set muted(value) {\r\n                this.media.muted = value;\r\n            }\r\n        };\r\n\r\n        this.plugins.forEach(plugin => {\r\n            plugin.run(player);\r\n        });\r\n    }\r\n    play() {\r\n        this.media.play();\r\n    }\r\n    pause() {\r\n        this.media.pause();\r\n    }\r\n    mute() {\r\n        this.media.muted = true;\r\n    }\r\n    unmute() {\r\n        this.media.muted = false;\r\n    }\r\n}\r\n\r\nexport default MediaPlayer","function AutoPlay(){}\r\n\r\nAutoPlay.prototype.run = function (player){\r\n    if(!player.muted){\r\n        player.muted = true;\r\n    }\r\n    player.play();\r\n};\r\n\r\nexport default AutoPlay;","import MediaPlayer from \"../MediaPlayer\";\r\n\r\nclass AutoPause {\r\n    private threshold: number;\r\n    player: MediaPlayer;\r\n\r\n    constructor(){\r\n        this.threshold = 0.25\r\n        this.handleIntersection = this.handleIntersection.bind(this);\r\n        this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\r\n    }\r\n\r\n    run(player){\r\n        this.player = player;\r\n\r\n        const observer = new IntersectionObserver(this.handleIntersection, {\r\n            threshold: this.threshold //umbral\r\n        })\r\n\r\n        observer.observe(this.player.media)\r\n\r\n        document.addEventListener(\"visibilitychange\", this.handleVisibilityChange)\r\n    }\r\n\r\n    private handleIntersection(entries: IntersectionObserverEntry[]){\r\n        const entry = entries[0]; //Elementos del contenedor\r\n        \r\n        if(entry.intersectionRatio < this.threshold){\r\n            this.player.pause();\r\n        }else{\r\n            this.player.play();\r\n        }\r\n    }\r\n\r\n    private handleVisibilityChange() {\r\n        const isVisible = document.visibilityState === \"visible\"\r\n\r\n        if(isVisible){\r\n            this.player.play()\r\n        }else{\r\n            this.player.pause();\r\n        }\r\n    }\r\n}\r\n\r\nexport default AutoPause;","import MediaPlayer from './MediaPlayer.js'\r\nimport AutoPlay from './plugins/AutoPlay.js'\r\nimport AutoPause from './plugins/AutoPause.ts'\r\n\r\nconst video = document.querySelector(\"video\");\r\nconst buttonPlay = document.getElementById(\"play\");\r\nconst buttonMute = document.getElementById(\"mute\");\r\n\r\nconst player = new MediaPlayer({ \r\n    el: video,\r\n    plugins: [new AutoPlay(), new AutoPause()] \r\n});\r\nbuttonPlay.onclick = () => video.paused ? player.play() : player.pause();\r\nbuttonMute.onclick = () => video.muted ? player.unmute() : player.mute();\r\n\r\nif('serviceWorker' in navigator){\r\n    navigator.serviceWorker.register('/sw.js').catch(error => {\r\n        console.log(error.message);\r\n    })\r\n}"]}